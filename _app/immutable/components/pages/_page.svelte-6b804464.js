import{S as O,i as V,s as q,e as F,b as w,J as x,K as ne,C as z,h as b,L as $,M as ee,m as y,n as I,N as C,O as P,P as D,k as N,q as T,l as E,r as L,H as k,u as te,a as M,x as re,c as j,y as le,z as oe,d as ie,f as B,t as H,A as se,o as ae,p as d,g as fe,Q as ue}from"../../chunks/index-6eec7c28.js";import{w as ce}from"../../chunks/index-9e579640.js";function U(a,e,t){const s=a.slice();return s[6]=e[t],s}function K(a,e){let t,s,n,f;function l(){return e[5](e[6])}return{key:a,first:null,c(){t=$("rect"),this.h()},l(r){t=ee(r,"rect",{y:!0,x:!0,class:!0}),y(t).forEach(b),this.h()},h(){I(t,"y",s=`${75-e[0]*25}%`),I(t,"x",`${e[6]*25}%`),I(t,"class","svelte-eo7o5i"),C(t,"target",e[1]===e[6]),C(t,"validated",e[2]),C(t,"error",e[4].column===e[6]&&e[4].row===e[0]),this.first=t},m(r,i){w(r,t,i),n||(f=P(t,"click",l),n=!0)},p(r,i){e=r,i&1&&s!==(s=`${75-e[0]*25}%`)&&I(t,"y",s),i&2&&C(t,"target",e[1]===e[6]),i&4&&C(t,"validated",e[2]),i&17&&C(t,"error",e[4].column===e[6]&&e[4].row===e[0])},d(r){r&&b(t),n=!1,f()}}}function _e(a){let e=[],t=new Map,s,n=[0,1,2,3];const f=l=>l[6];for(let l=0;l<4;l+=1){let r=U(a,n,l),i=f(r);t.set(i,e[l]=K(i,r))}return{c(){for(let l=0;l<4;l+=1)e[l].c();s=F()},l(l){for(let r=0;r<4;r+=1)e[r].l(l);s=F()},m(l,r){for(let i=0;i<4;i+=1)e[i].m(l,r);w(l,s,r)},p(l,[r]){r&31&&(n=[0,1,2,3],e=x(e,r,f,1,l,n,t,s.parentNode,ne,K,s,U))},i:z,o:z,d(l){for(let r=0;r<4;r+=1)e[r].d(l);l&&b(s)}}}function de(a,e,t){let{row:s}=e,{targetNumber:n}=e,{validated:f}=e,{onClick:l}=e,{errorLocation:r}=e;const i=m=>l(m);return a.$$set=m=>{"row"in m&&t(0,s=m.row),"targetNumber"in m&&t(1,n=m.targetNumber),"validated"in m&&t(2,f=m.validated),"onClick"in m&&t(3,l=m.onClick),"errorLocation"in m&&t(4,r=m.errorLocation)},[s,n,f,l,r,i]}class me extends O{constructor(e){super(),V(this,e,de,_e,q,{row:0,targetNumber:1,validated:2,onClick:3,errorLocation:4})}}var A={};function Q(a){return a==="local"?localStorage:sessionStorage}function he(a,e,t){const s=(t==null?void 0:t.serializer)??JSON,n=(t==null?void 0:t.storage)??"local",f=typeof window<"u"&&typeof document<"u";function l(r,i){f&&Q(n).setItem(r,s.stringify(i))}if(!A[a]){const r=ce(e,g=>{const v=f?Q(n).getItem(a):null;if(v&&g(s.parse(v)),f){const c=h=>{h.key===a&&g(h.newValue?s.parse(h.newValue):null)};return window.addEventListener("storage",c),()=>window.removeEventListener("storage",c)}}),{subscribe:i,set:m}=r;A[a]={set(g){l(a,g),m(g)},update(g){const v=g(D(r));l(a,v),m(v)},subscribe:i}}return A[a]}function ge(a){let e,t,s=(a[0]/1e3).toFixed(2)+"",n,f;return{c(){e=N("h1"),t=N("span"),n=T(s),f=T(" sec."),this.h()},l(l){e=E(l,"H1",{class:!0});var r=y(e);t=E(r,"SPAN",{class:!0});var i=y(t);n=L(i,s),i.forEach(b),f=L(r," sec."),r.forEach(b),this.h()},h(){I(t,"class","svelte-140j79"),I(e,"class","svelte-140j79")},m(l,r){w(l,e,r),k(e,t),k(t,n),k(e,f)},p(l,[r]){r&1&&s!==(s=(l[0]/1e3).toFixed(2)+"")&&te(n,s)},i:z,o:z,d(l){l&&b(e)}}}function be(a,e,t){let{value:s}=e;return a.$$set=n=>{"value"in n&&t(0,s=n.value)},[s]}class pe extends O{constructor(e){super(),V(this,e,be,ge,q,{value:0})}}function W(a,e,t){const s=a.slice();return s[13]=e[t],s[15]=t,s}function G(a,e){let t,s,n;function f(...l){return e[9](e[15],...l)}return s=new me({props:{row:e[15]-e[1],targetNumber:e[13],validated:e[1]>e[15],onClick:f,errorLocation:e[5]}}),{key:a,first:null,c(){t=F(),re(s.$$.fragment),this.h()},l(l){t=F(),le(s.$$.fragment,l),this.h()},h(){this.first=t},m(l,r){w(l,t,r),oe(s,l,r),n=!0},p(l,r){e=l;const i={};r&3&&(i.row=e[15]-e[1]),r&1&&(i.targetNumber=e[13]),r&3&&(i.validated=e[1]>e[15]),r&1&&(i.onClick=f),r&32&&(i.errorLocation=e[5]),s.$set(i)},i(l){n||(B(s.$$.fragment,l),n=!0)},o(l){H(s.$$.fragment,l),n=!1},d(l){l&&b(t),se(s,l)}}}function X(a){let e,t,s,n,f;return{c(){e=N("div"),t=N("button"),s=T("Restart"),this.h()},l(l){e=E(l,"DIV",{style:!0});var r=y(e);t=E(r,"BUTTON",{style:!0});var i=y(t);s=L(i,"Restart"),i.forEach(b),r.forEach(b),this.h()},h(){d(t,"padding","8px"),d(t,"border-radius","8px"),d(t,"font-size","x-large"),d(e,"position","absolute"),d(e,"top","0"),d(e,"left","0"),d(e,"width","100%"),d(e,"height","100%"),d(e,"display","flex"),d(e,"flex-direction","column"),d(e,"align-items","center"),d(e,"justify-content","center"),d(e,"background-color","rgba(100, 100, 100, 0.6)")},m(l,r){w(l,e,r),k(e,t),k(t,s),n||(f=P(t,"click",a[7]),n=!0)},p:z,d(l){l&&b(e),n=!1,f()}}}function Y(a){let e,t,s,n=(a[4]/1e3).toFixed(2)+"",f,l,r,i,m=(D(a[6])/1e3).toFixed(2)+"",g,v,c,h,o,u;return{c(){e=N("div"),t=N("h1"),s=T("Time: "),f=T(n),l=M(),r=N("h2"),i=T("Best time: "),g=T(m),v=M(),c=N("button"),h=T("Restart"),this.h()},l(_){e=E(_,"DIV",{style:!0});var p=y(e);t=E(p,"H1",{style:!0});var S=y(t);s=L(S,"Time: "),f=L(S,n),S.forEach(b),l=j(p),r=E(p,"H2",{style:!0});var R=y(r);i=L(R,"Best time: "),g=L(R,m),R.forEach(b),v=j(p),c=E(p,"BUTTON",{style:!0});var J=y(c);h=L(J,"Restart"),J.forEach(b),p.forEach(b),this.h()},h(){d(t,"background-color","white"),d(t,"padding","1em"),d(t,"border-radius","1em"),d(r,"background-color","white"),d(r,"padding","1em"),d(r,"border-radius","1em"),d(c,"padding","8px"),d(c,"border-radius","8px"),d(c,"font-size","x-large"),d(e,"position","absolute"),d(e,"top","0"),d(e,"left","0"),d(e,"width","100%"),d(e,"height","100%"),d(e,"display","flex"),d(e,"flex-direction","column"),d(e,"align-items","center"),d(e,"justify-content","center"),d(e,"background-color","rgba(100, 100, 100, 0.6)")},m(_,p){w(_,e,p),k(e,t),k(t,s),k(t,f),k(e,l),k(e,r),k(r,i),k(r,g),k(e,v),k(e,c),k(c,h),o||(u=P(c,"click",a[7]),o=!0)},p(_,p){p&16&&n!==(n=(_[4]/1e3).toFixed(2)+"")&&te(f,n)},d(_){_&&b(e),o=!1,u()}}}function ve(a){let e,t=[],s=new Map,n,f,l,r,i,m,g=a[0];const v=o=>o[15];for(let o=0;o<g.length;o+=1){let u=W(a,g,o),_=v(u);s.set(_,t[o]=G(_,u))}f=new pe({props:{value:a[4]}});let c=a[2]&&X(a),h=a[3]&&Y(a);return{c(){e=$("svg");for(let o=0;o<t.length;o+=1)t[o].c();n=M(),re(f.$$.fragment),l=M(),c&&c.c(),r=M(),h&&h.c(),i=F()},l(o){e=ee(o,"svg",{});var u=y(e);for(let _=0;_<t.length;_+=1)t[_].l(u);u.forEach(b),n=j(o),le(f.$$.fragment,o),l=j(o),c&&c.l(o),r=j(o),h&&h.l(o),i=F()},m(o,u){w(o,e,u);for(let _=0;_<t.length;_+=1)t[_].m(e,null);w(o,n,u),oe(f,o,u),w(o,l,u),c&&c.m(o,u),w(o,r,u),h&&h.m(o,u),w(o,i,u),m=!0},p(o,[u]){u&291&&(g=o[0],fe(),t=x(t,u,v,1,o,g,s,e,ue,G,null,W),ie());const _={};u&16&&(_.value=o[4]),f.$set(_),o[2]?c?c.p(o,u):(c=X(o),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null),o[3]?h?h.p(o,u):(h=Y(o),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null)},i(o){if(!m){for(let u=0;u<g.length;u+=1)B(t[u]);B(f.$$.fragment,o),m=!0}},o(o){for(let u=0;u<t.length;u+=1)H(t[u]);H(f.$$.fragment,o),m=!1},d(o){o&&b(e);for(let u=0;u<t.length;u+=1)t[u].d();o&&b(n),se(f,o),o&&b(l),c&&c.d(o),o&&b(r),h&&h.d(o),o&&b(i)}}}function Z(){return new Array(20).fill(0).map(()=>Math.floor(Math.random()*4))}function ke(a,e,t){let s=Z(),n=0,f=!1,l=!1,r=0,i=0,m=!1;const g=he("bestTime",1/0);let v={row:-1,column:-1};function c(){r=0,t(4,i=0),m=!1,t(1,n=0),t(2,f=!1),t(3,l=!1),t(5,v={row:-1,column:-1}),t(0,s=Z())}function h(){const _=p=>{m||(r||(r=p),t(4,i=p-r),window.requestAnimationFrame(_))};_(0)}ae(()=>{document.addEventListener("keydown",_=>{switch(_.key){case"a":o(n,0);break;case"s":o(n,1);break;case"d":o(n,2);break;case"f":o(n,3);break;case`
`:case" ":{(f||l)&&c();break}}})});function o(_,p){if(!f)if(i===0&&h(),n===_&&p===s[_]){if(t(1,n=n+1),n===s.length){t(3,l=!0),m=!0;const S=D(g);(!S||i<S)&&g.set(i)}}else t(2,f=!0),m=!0,t(5,v={row:_-n,column:p})}return[s,n,f,l,i,v,g,c,o,(_,p)=>o(_,p)]}class Te extends O{constructor(e){super(),V(this,e,ke,ve,q,{})}}export{Te as default};
